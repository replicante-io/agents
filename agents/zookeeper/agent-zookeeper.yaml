agent:
  actions:
    enabled: ~
    #execute_interval: 120
    prune_interval: 60
    prune_keep: 5

  api:
    tls:
      clients_ca_bundle: '../../devtools/pki/ca/certs/ca.crt'
      server_cert: '../../devtools/pki/ca/certs/server.crt'
      server_key: '../../devtools/pki/ca/keys/server.key'

  db: '../../devtools/data/agents/zookeeper.db'

  sentry:
    dsn: 'http://d625fa7b598046dca7eb7a1e23d9a5c9@localhost:9000/4'

  #tracing:
  #  backend: zipkin
  #  options:
  #    transport: http
  #    options:
  #      url: 'http://localhost:9411'

  external_actions:
    fail-late:
      description: 'Test action that fails after 5 seconds'
      action:
        - python
        - ../../devtools/external-action.py
        - run
        - bash
        - -c
        - 'sleep 5 && echo "some error" >&2; false'
      check:
        - python
        - ../../devtools/external-action.py
        - check
    sleep:
      description: 'Test action that sleeps'
      action:
        - python
        - ../../devtools/external-action.py
        - run
        - sleep
        - 120
      check:
        - python
        - ../../devtools/external-action.py
        - check
    systemd:
      description: 'Sleep using systemd to manage the action'
      action:
        - ../../tools/systemd/systemd-start
        - --user
        - repliagent-sleep
        # Reads stdin to execute:
        #- systemctl
        #- --user
        #- start
        #- --no-block
        #- repliagent-sleep@{action_id}
      check:
        - ../../tools/systemd/systemd-check
        - repliagent-sleep

# Zookeeper specific configuration.
zookeeper:
  cluster: dev-agent-zookeeper
  target: 'localhost:2181'
